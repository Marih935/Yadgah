{% extends 'base.html' %}
{% block content %}
{% load custom_filters %}

<div class="content-wrapper">
    <!-- اخبار بخش -->
    <div class="news-section">
        <h2>اخبار جدید</h2>
        {% if news_items %}
            {% for news in news_items %}
                <div class="news-item">
                    <h3>{{ news.title }}</h3>
                    <p>{{ news.content|truncatewords:20 }}</p>
                    <p>تاریخ انتشار: {{ news.published_at|jalali_date }}</p>
                </div>
            {% endfor %}
        {% else %}
            <p>هیچ خبری در حال حاضر موجود نیست.</p>
        {% endif %}
    </div>


    <!-- خط عمودی -->
    <div class="vl"></div> 

    <!-- مطالب اصلی -->
    <div class="main-content">
        <div class="title-button-container">
            <h1 class="inline h1-margin">عنوان</h1>

            {% if user.is_authenticated %}
                <button class="inline button-margin" onclick="window.location.href='{% url 'ask_question' %}'">پرسیدن سوال</button>
            {% else %}
                <p>برای پرسیدن سوال، لطفاً <a href="{% url 'login' %}">وارد حساب کاربری خود شوید</a>.</p>
            {% endif %}
        </div>

        <p>سوالات اخیر</p>

        <div class="recent-questions">
            {% if questions %}
                <ul>
                    {% for question in questions %}
                        <li>
                            <!-- اضافه کردن لینک به جزئیات سوال -->
                            <h3><a href="{% url 'question_detail' question.id %}">{{ question.title }}</a></h3>
                            <p>{{ question.content|truncatewords:20 }}</p>
                            <p>تاریخ پرسش: {{ question.created_at|jalali_date }}</p>
                        </li>
                    {% endfor %}
                </ul>
            {% else %}
                <p>هیچ سوالی ارسال نشده است.</p>
            {% endif %}
        </div>
    </div>    
</div>
{% endblock %}
